<html>

<head>

</head>

<body>

  <script>
    /*function checkLogin(req, res, next){
      if(req.session.user){
        next()
      } else {
        var err = new Error("User not logged in!")
        next(err)
      }
    }*/

    function comprobarSesion() {
      fetch('http://localhost:8080/paginaProtegida', {
        method: "GET"
      }).then(function (respuesta) {

        if (respuesta.ok) {
          return respuesta
        } else {
          console.log("hubo un fallo")
        }

      }).then(function (datos) {
        // 'datos' ahora contiene el valor devuelto por el servidor
        if (datos === true) {
          // Acción cuando la respuesta es true
          console.log("Usuario autenticado");
        } else {
          // Acción cuando la respuesta es false
          console.log("Usuario no autenticado");
          location.href = "http://localhost:8080/login.html"
        }
      }).catch(function (error) {
        console.log("Error en la solicitud:", error);
      });
    }

    comprobarSesion()
  </script>

</body>

</html>