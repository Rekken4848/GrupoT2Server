<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-section="adminAvisos" data-value="tituloPagina">Admin's Alerts</title>

    <script>
        function comprobarSesion() {
          fetch('http://localhost:8080/paginaProtegida', {
            method: "GET"
          }).then(function (respuesta) {
    
            if (respuesta.ok) {
              return respuesta.json()
            } else {
              console.log("hubo un fallo")
            }
    
          }).then(function (datos) {
            console.log(datos)
            // 'datos' ahora contiene el valor devuelto por el servidor
            if (datos === true) {
              // Acción cuando la respuesta es true
              console.log("Usuario autenticado");
            } else if (datos === false) {
              // Acción cuando la respuesta es false
              console.log("Usuario no autenticado");
              location.href = "http://localhost:8080/login.html"
            }
          }).catch(function (error) {
            console.log("Error en la solicitud:", error);
          });
        }
    
        comprobarSesion()
    </script>
    <script src="admin_avisos.js"></script>


    <link href="css/estilo_comun.css" rel="stylesheet" type="text/css">
    <link href="css/estilo_admin_comun.css" rel="stylesheet" type="text/css">
    <link href="css/estilo_adminAvisos.css" rel="stylesheet" type="text/css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <style>
        html {
            font-family: 'Poppins', sans-serif;
        }
    </style>

</head>

<body onload="refrescarTablaAvisos()">
    <!-- cabecera de la pagina -------------------------------------------------------- -->
    <header class="cabecera" role="banner">

        <a href="admin.html" id="logoCleanCloud">
            <img src="images/cleancloud-logo.png" alt="logo de la empresa Clean Cloud" >
        </a>

        <div id="fondoHeader">
            <a href="admin_descargaMapa.html">
                <button type="button" class="boton" id="descargarMapa">Mapa</button>
                </a>

            <div id="headerUserContainer">

                    <div id="headerUserNombre" onclick="redirectToURLEditAdmin()">
                        <p id="AdminName">Perfil</p>
                    </div>
            </div>
        </div>

    </header>
    <!-- fin de cabecera de la pagina -------------------------------------------------------- -->
    <div id="fondoPagAnuncios">
        <div id="contenedorGeneral">
            <p id="tituloPagAnuncios" data-section="adminAvisos" data-value="tituloPeticiones">Peticiones</p>

            
            <div class="contenedorAnuncios">
                <img src="images/linea_horizontal.svg" alt="separador horizontal de los anuncios">
                <div class="anuncio">
                    <div class="empleado">
                        <p id="DNIEmpleadoAnuncio" data-section="adminAvisos" data-value="DNIEmpleado">DNI empleado:</p>
                        <button class="iconoBorrar"><img src="images/papelera_icono.svg" alt="icono borrar"></button>
                    </div>

                    <div class="tituloAnuncio">
                        <div class="tituloAnuncioDiv">
                            <p id="TituloAnuncio">Anuncio Titulo</p>
                        </div>
                        <div class="telefono">
                            <p id="telefonoAnuncio">123-456-789</p>
                        </div>
                    </div>

                    <div class="contenidoAnuncio">
                        <div class="contenedorAsuntoAnuncio">
                            <p id="asuntoAnuncio">Asunto del anuncio</p>
                        </div>
                        <div class="contenedorDescripcion">
                            <p id="descripcionAnuncio">Descripcion del anuncio</p>
                        </div>
                    </div>
                    <button class="botonCompletarAviso" data-section="adminAvisos" data-value="botonCompletar">Completar</button>
                </div>
            </div>

            
            <div class="contenedorAnuncios">
                <img src="images/linea_horizontal.svg" alt="separador horizontal de los anuncios">
                <div class="anuncio">
                    <div class="empleado">
                        <p id="DNIEmpleadoAnuncio" data-section="adminAvisos" data-value="DNIEmpleado">DNI empleado:</p>
                        <button class="iconoBorrar"><img src="images/papelera_icono.svg" alt="icono borrar"></button>
                    </div>
            
                    <div class="tituloAnuncio">
                        <div class="tituloAnuncioDiv">
                            <p id="TituloAnuncio">Anuncio Titulo</p>
                        </div>
                        <div class="telefono">
                            <p id="telefonoAnuncio">123-456-789</p>
                        </div>
                    </div>
            
                    <div class="contenidoAnuncio">
                        <div class="contenedorAsuntoAnuncio">
                            <p id="asuntoAnuncio">Asunto del anuncio</p>
                        </div>
                        <div class="contenedorDescripcion">
                            <p id="descripcionAnuncio">Lorem ipsum dolor sit amet consectetur adipisicing elit. Ex deleniti saepe provident cumque quod nulla id omnis doloribus minus maiores assumenda fuga vel fugit, suscipit soluta, repellat necessitatibus illum expedita.</p>
                        </div>
                    </div>
                    <button class="botonCompletarAviso" data-section="adminAvisos" data-value="botonCompletar">Completar</button>
                </div>
            </div>


        </div>
    </div>
    

    <!-- footer -------------------------------------------------------- -->
    <footer>
        <img src="images/generalitat_logo.png" alt="logo de la generalitat valenciana">
        <div id="textoFooter">
            <p>© Generalitat</p>
            <p data-section="footer" data-value="footer">Mapa web | Avís legal | Accessibilitat Política de cookies | Correu del funcionari</p>
        </div>
    </footer>

    <!-- popup confirmar eliminar ---------------------------------------- -->
    <div id="contenedorConfirmarEliminar">
        <div id="divClose">
            <button onclick="document.getElementById('contenedorConfirmarEliminar').style.visibility = 'hidden';" id="iconoCerrar"><img
                    src="images/cross.png" alt="iconocerrar"></button>
        </div>
        <div id="tituloPopUpFiltros">
            <h3 id="confirmarEliminar" data-section="adminAvisos" data-value="borrarAvisoTitulo">¿Confirmas el eliminar este aviso?</h3>
        </div>
        <div class="contenedorFiltroEspecificado">
            <div class="editarDato">
                <p data-section="adminAvisos" data-value="borrarAvisoDesc">Este aviso seguira siendo visible para el portador del dispositivo, pero no para ti.</p>
            </div>
            <div id="botonConfirmarEliminar">
                <button id="botonConfirmarEliminar" data-section="adminAvisos" data-value="borrarAvisoBoton">Eliminar</button>
            </div>
    
        </div>

</body>

</html>